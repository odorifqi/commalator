var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw c}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var App=function(){var e=React.useReducer(dataReducer,{total:0,price:{perkg:0,percent:0},personData:{}}),t=_slicedToArray(e,2),a=t[0],n=t[1];return React.useEffect((function(){var e=0;for(var t in a.personData)e+=parseInt(a.personData[t].value);n({type:"SET_TOTAL",payload:e})}),[a.personData]),React.createElement(React.Fragment,null,React.createElement("div",{className:"yellowed"},React.createElement("h1",null,"COMMALATOR"),React.createElement(DateToday,null)),React.createElement("div",{id:"main"},React.createElement("div",{className:"main-div wider"},React.createElement(InputPerson,{addList:function(e,t,a){n({type:"SET_PERSON_DATA",payload:{id:e,name:t,value:a}})},removeList:function(e){n({type:"REMOVE_PERSON_DATA",payload:e})}}),React.createElement("div",{id:"div-total-weight"},React.createElement("p",{className:"highlight",style:{fontSize:"1.7em"}},"Total"),React.createElement("p",{id:"total"},a.total," kg"))),React.createElement("div",{className:"main-div wider"},React.createElement(DetailInput,{getPrice:function(e){n({type:"SET_PRICE",payload:e})}}),React.createElement(DetailResult,{price:a.price,total:a.total,personData:a.personData}))))};function dataReducer(e,t){switch(t.type){case"SET_TOTAL":return Object.assign({},e,{total:t.payload});case"SET_PRICE":return Object.assign({},e,{price:{perkg:t.payload.target[0].value,percent:t.payload.target[1].value}});case"SET_PERSON_DATA":return Object.assign({},e,{personData:Object.assign({},e.personData,_defineProperty({},t.payload.id,t.payload))});case"REMOVE_PERSON_DATA":return Object.assign({},e,{personData:Object.filter(e.personData,(function(e){return e.id!==t.payload}))});default:throw new Error}}function DetailInput(e){var t=e.getPrice;return React.createElement("div",null,React.createElement("h2",null,"Rincian"),React.createElement("form",{action:"",onSubmit:function(e){e.preventDefault(),t(e)}},React.createElement("p",{className:"highlight"},"Harga per kg(Rp)"),React.createElement("div",{className:"detail-input-div"},React.createElement("input",{type:"number",name:"price",id:"price",placeholder:"ex:11000",required:!0})),React.createElement("p",{className:"highlight"},"Persentase (%)"),React.createElement("div",{className:"detail-input-div"},React.createElement("input",{type:"number",name:"percent",id:"percent",placeholder:"ex:50",required:!0})),React.createElement("input",{id:"detailBtn",type:"submit",value:"submit"})))}function DetailResult(e){var t=e.price,a=e.total,n=e.personData,r=t.perkg*a,c=.01*t.percent,l=r*c,i=[];if(t.perkg){var u=!0,o=!1,s=void 0;try{for(var p,d=Object.entries(n)[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var m=p.value,R=_slicedToArray(m,2),y=(R[0],R[1]);i.push({name:y.name,value:r*c*y.value/a,key:y.id})}}catch(e){o=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(o)throw s}}}return React.createElement("div",{id:"detail-result-div"},React.createElement(SubDR,{key:"Hasil total",title:"Hasil total"},"Rp",r.toLocaleString("id-ID")),React.createElement(SubDR,{key:"Pendapatan",title:"Pendapatan"},"Rp",l.toLocaleString("id-ID")),React.createElement(SubDR,{key:"per pihak",title:"Pendapatan per pihak"},i.map((function(e){return React.createElement(ListPerson,{x:e,key:"list_"+e.key})}))))}function ListPerson(e){var t=e.x;return React.createElement(React.Fragment,null,React.createElement("span",null,t.name||"unknown",": Rp",t.value.toLocaleString("id-ID")),React.createElement("hr",null))}function SubDR(e){var t=e.children,a=e.title;return React.createElement("div",{className:"sub-dr"},React.createElement("p",{className:"highlight"},a),React.createElement("div",{className:"sub-result-div"},React.createElement("p",{id:"priceTotal",className:"result-text"},t)))}Object.filter=function(e,t){return Object.keys(e).filter((function(a){return t(e[a])})).reduce((function(t,a){return Object.assign(t,_defineProperty({},a,e[a]))}),{})};var InputPerson=function(e){var t=e.addList,a=e.removeList,n=React.useReducer(listReducer,[{key:0}]),r=_slicedToArray(n,2),c=r[0],l=r[1];function i(e,a,n){t(e,a,n)}function u(e){a(e)}function o(e){l({type:"REMOVE",payload:e})}return React.createElement(React.Fragment,null,React.createElement("div",{className:"clearfix"},React.createElement(MyButton,{handleClick:function(){l({type:"ADD"})}},"+")),c.map((function(e){return React.createElement(PersonObj,{key:"person_"+(e.key+1),i:e.key,addList:i,removeList:u,removePerson:o})})))};function listReducer(e,t){switch(t.type){case"ADD":var a=e.length;return[].concat(_toConsumableArray(e),[{key:0!==a?e[a-1].key+1:a}]);case"REMOVE":return e.filter((function(a){return e[e.indexOf(a)].key!==t.payload}));default:throw new Error}}var PersonObj=function(e){var t=e.i,a=e.addList,n=e.removeList,r=e.removePerson,c=React.useReducer(personObjReducer,{name:"",input:"",value:0}),l=_slicedToArray(c,2),i=l[0],u=l[1];return React.useEffect((function(){i.value&&a(t,i.name,i.value)}),[i.name,i.value]),React.createElement("div",{className:"person-div focus"},React.createElement("input",{id:"name_"+t,className:"name-label",placeholder:"nama",type:"text",value:i.name,onChange:function(e){u({type:"SET_NAME",payload:e.target.value})}}),React.createElement(MyButton,{className:"clearfix",btnName:"x",handleClick:function(){return function(e){r(e),n(e)}(t)}}),React.createElement("br",null),React.createElement("input",{type:"text",name:"value",id:"value_"+t,placeholder:"10, 25, 31, ...",value:i.input,onChange:function(e){u({type:"SET_INPUT",payload:e.target.value})}}),React.createElement(MyButton,{btnName:"submit",handleClick:function(){u({type:"SET_VALUE",payload:function(){var e=i.input.split(",").reduce((function(e,t){return parseInt(e)+parseInt(t)}));return isNaN(e)?alert("not a number"):e}})}}),React.createElement("p",null,i.value," kg"))};function personObjReducer(e,t){switch(t.type){case"SET_NAME":return Object.assign({},e,{name:t.payload});case"SET_INPUT":return Object.assign({},e,{input:t.payload});case"SET_VALUE":return Object.assign({},e,{value:t.payload()});default:throw new Error}}function MyButton(e){var t=e.btnName,a=e.handleClick,n=e.children;return React.createElement("button",{type:"button",onClick:a},t||n)}function DateToday(){var e=new Date;return React.createElement("p",null,"Tanggal:"," ",React.createElement("strong",null,["Minggu","Senin","Selasa","Rabu"," Kamis","Jumat","Sabtu"][e.getDay()],", ",e.getDate()," ",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()]," ",e.getFullYear()," "))}ReactDOM.render(React.createElement(React.StrictMode,null,React.createElement(App,null)),document.getElementById("root"));